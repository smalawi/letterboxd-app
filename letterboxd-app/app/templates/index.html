{% extends "base.html" %}

{% block content %}
	<h1>Query Tool</h1>
	<form action="" method="post" novalidate>
		{{ form.hidden_tag() }}
		<p>
			{{ form.query_type() }}
			{{ form.search_term(size=32, autocomplete="off") }}
			{{ form.submit() }}
		</p>
		<p>
			{% for error in form.query_type.errors %}
			<span style="color: red;">[{{ error }}]</span>
			{% endfor %}
		</p>
		<p>
			{% for error in form.search_term.errors %}
			<span style="color: red;">[{{ error }}]</span>
			{% endfor %}
		</p>
		{% if results %}
			<hr>
			<h2>Search results for {{ results_type }} "{{ search_term }}":</h2>
			{% if results_type == "movie" %}
				<ul>
				{% for result in results %}
					<li><p>Name: <a href="{{ url_for('movie', movie_href=result.movie_href) }}">{{ result.movie_name }}</a></p><p>Rating: {{ result.rating }}</p></li>
				{% endfor %}
				</ul>
			{% elif results_type == "person" %}
				<ul>
				{% for result in results %}
					<li><a href="{{ url_for('person', person_id=result.person_id) }}">{{ result.person_name }}</a> - {{ result.role }} ({{ result.ct }})</li>
				{% endfor %}
				</ul>
			{% endif %}
		{% endif %}
	</form>
{% endblock %}